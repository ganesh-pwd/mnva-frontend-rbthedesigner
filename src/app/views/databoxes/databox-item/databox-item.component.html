<br>
<div class="m-333" fxLayout="row" fxLayoutWrap="wrap" *ngIf="folder">
  <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" [@animate]="{value:'*', params:{ y:'-200px', delay:'400ms' }}">
    <h1 class="mat-h1">
      <!-- <mat-icon>widgets</mat-icon>  -->
      {{data?.databox_name}}
      <small>
        <mat-icon (click)="openDialog('Edit Databox', 'Databox Name', true, '')">edit</mat-icon> | 
        <span class="main-route">
        <a routerLink="/databoxes/">Databoxes </a> / 
        <a routerLink="/databoxes/{{folder}}">{{folder}} </a> / 
      {{data?.databox_name}}</span>
      </small>
    </h1>
  </div>
</div>

<div class="m-333" fxLayout="row" fxLayoutWrap="wrap">
  <button 
    mat-raised-button 
    class="mb-05" 
    color="primary" 
    routerLink="/databoxes/settings/{{data?._id}}">
    Query
  </button>

<!--   <button 
    mat-raised-button 
    class="mb-05 mat-bg-green" 
    routerLink="/databoxes/settings/algorithm/{{data?._id}}">
    Algorithms
  </button>
 -->

  <button 
    mat-raised-button 
    class="mb-05 mat-bg-success" 
    routerLink="/databoxes/settings/connect/{{data?._id}}">
    Connect Your Data
  </button>
</div>
<hr>

<div [hidden]="data?.first_create">
  <div fxLayout="row" fxLayoutWrap="wrap">
    <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" [@animate]="{value:'*', params:{ y:'200px', delay:'400ms' }}">
      <div class="page-search mat-bg-gray" *ngIf="data?.status !== 'Refreshing'">
        <p>
            <span fxFlex></span>
            {{data?.mentions}} mentions     |    Last Updated: {{data?.last_updated}}
        </p>
      </div>

      <div class="page-search mat-bg-gray" *ngIf="data?.status === 'Refreshing'">
        <p>
            <span fxFlex></span>
            Your data is being refreshed. We'll send you an email when your data arrives. Please take note the current data will be replaced
        </p>
      </div>

      <div class="mat-elevation-z8 hot-container">
        <hot-table id="scroll-area" [hotId]="hotId" [settings]="tableSettings"></hot-table>

        <div class="table-foot">
          <div>
            <button mat-raised-button (click)="addRow()">Add Row</button>
            <button mat-raised-button (click)="saveAllData()">Save All Changes</button>
          </div>
          <span fxFlex></span>

          <p class="text-muted">Item 1 - 
            <span *ngIf="paginatedData.items.length < 10; else showTn">
              {{paginatedData.items.length}}
            </span>
            <ng-template #showTn>
              10
            </ng-template>
            of   {{paginatedData.total}}     | </p>
          <p class="text-muted">Page {{paginatedData.page}}     |        </p> 
          <button class="paginate" matTooltip="Prev Page" (click)="navigateToPrevPage(folder, data?._id)" [disabled]="!paginatedData.pre_page" [ngClass]="!paginatedData.pre_page ? 'disabled' : ''">
            <i class="fa fa-chevron-left"></i>
          </button>

          <button class="paginate" matTooltip="Next Page" (click)="navigateToNextPage(folder, data?._id)">
            <i class="fa fa-chevron-right"></i> 
          </button>
        </div>

      </div>

    </div>
  </div>

  <br>

  <div fxLayout="row" fxLayoutWrap="wrap" [hidden]="data?.first_create">
    <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" [@animate]="{value:'*', params:{ y:'200px', delay:'400ms' }}">

      <div class="bottom-data">
        <br>
        <button mat-raised-button class="download-csv" (click)="downloadCSV()" #exportFile>Download to CSV</button>
        <br>
        <h2 class="mat-h1">Not finding results from a specific {{data?.datasource}} Page? Suggest to add it here</h2>
        <h3 class="mat-h3">Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum. lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum.</h3>

        <form class="example-form">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="{{data?.page_search_name}} Name">
          </mat-form-field>
           
          <mat-form-field class="example-full-width">
            <input matInput placeholder="{{data?.page_search_name}} ID" >
          </mat-form-field>
        </form>

        <button mat-raised-button>Send</button> 

        <!-- <h2 class="mat-h1">Do you want to rebuild this table to its original values?</h2>
        <h3 class="mat-h3">Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum. lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum.</h3>
        <button mat-raised-button (click)="resetAllRow()" class="mat-bg-success">Rebuild</button> -->
        <br><br>
      </div>
    </div>
  </div>
</div>


<!-- If databox is newly created -->
<div fxLayout="row" fxLayoutWrap="wrap" [hidden]="!data?.first_create">
  <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100"  [@animate]="{value:'*', params:{ x:'300px', delay:'400ms' }}">

    <mat-card class="p-0">
      <mat-card-header class="mat-bg-warn align-right">
        <mat-card-title>
          <p>No configuration yet. Please go to your Databox Settings and create a query   </p>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <br><br>
        <div class="text-center">
          <h1 class="mat-h1 text-muted">No Data Yet</h1>
          <img src="/assets/images/image-placeholder.png" alt="" class="minerva-logo">
          <h5 class="mat-h4">Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere <br> qualisque, saperet ullamcorper ad eum. lorem ipsum dolor sit amet, <br> veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum.</h5>
          <br>
          <button mat-raised-button routerLink="/databoxes/settings/query/{{data?._id}}">Create your query</button>&nbsp;
          
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>



<br><br>