<br>
<div class="header-row m-333" fxLayout="row" fxLayoutWrap="wrap" *ngIf="databoxItemData?.folder">
  <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100">
    <img src="assets/images/icon-databox.png">
    <h1 class="mat-h1">
        {{databoxItemData?.databox_name}} 
        <small>
		  <mat-icon (click)="openDialog('Edit Databox Name', 'Databox Name', true, '')">edit</mat-icon>
          <span class="main-route">
            <a routerLink="/databoxes/">Databoxes </a> /
				<a (click)="navigateToDatabox(databoxItemData?.folder, databoxItemData?._id, databoxItemData?.first_create)">
				{{databoxItemData?.databox_name}}</a>
          </span> / Edit Query </small>
      </h1>
  </div>
</div>

<div class="m-333" fxLayout="row" fxLayoutWrap="wrap" #databoxesButtonID style="position:relative;">
	<button mat-raised-button
	class="mb-05"
	color="primary"
	(click)="navigateToDatabox(data?.folder, data?._id, data?.first_create)">
	Back to Databox
	</button>
	<span fxFlex></span>
	<div style="position: absolute; right: 0px; top: 6px;">
		<h3 class="mat-h4 mr-1">Mentions Remaining:
		  <span class="credits fw-400 mat-color-gray"> 10,000
		  </span>
		</h3>
	</div>
</div>
<hr>
<br>

<!-- <div fxLayout="row" fxLayoutWrap="wrap">
	<div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" fxLayoutAlign="center">
		<div class="text-center" >
			<mat-radio-group value="1" id="settings-radio">
				<mat-radio-button value="1"
					routerLink="/databoxes/settings/{{data?._id}}">
					Configuration
				</mat-radio-button>
				-------------
				<mat-radio-button value="2"
					routerLink="/databoxes/settings/query/{{data?._id}}">
					Query
				</mat-radio-button>
				-------------
				<mat-radio-button value="3"
					routerLink="/databoxes/settings/algorithm/{{data?._id}}">
					Algorithms
				</mat-radio-button>
			</mat-radio-group>
		</div>
	</div>
</div> -->

<div fxLayout="row" fxLayoutWrap="wrap">
	<!-- Column1 -->
	<div fxLayout="column" fxFlex="100" fxFlex.gt-md="50">
		<div class="settings" fxLayout="row" fxLayoutWrap="wrap">
			<h1 class="mat-h3">Query Editor</h1>
		</div>
		<!-- Change Datasource & Country -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" class="fixed-height" fxFlex.gt-sm="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Change Datasource</span>
						</mat-card-title>
					</mat-card-header>

					<mat-divider></mat-divider>
					<mat-card-content>
						<br>
						<form>
							<mat-form-field class="full-width">
								<mat-select [(value)]="selectedDatasource" (selectionChange)="selectDatasource()">
								<mat-option *ngFor="let singleDatasource of datasource" [value]="singleDatasource.name">
								{{ singleDatasource.name }}
								</mat-option>
								</mat-select>
							</mat-form-field>
						</form>
					</mat-card-content>
				</mat-card>
			</div>
		</div>
		<!-- Historical -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex.gt-sm="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Historical Data</span>
						</mat-card-title>
					</mat-card-header>

					<mat-divider></mat-divider>
					<mat-card-content class="mt-1">
						<br>
						<div fxLayout="row" class="mr-05" fxFlex.gt-sm="100">
						    <button mat-raised-button mat-color-primary class="query_type">Full Archive</button>
						    <button mat-raised-button mat-color-primary class="query_type">1d</button>
						    <button mat-raised-button mat-color-primary class="query_type">1w</button>
						    <button mat-raised-button mat-color-primary class="query_type">2w</button>
						    <button mat-raised-button mat-color-primary class="query_type">1m</button>
						    <button mat-raised-button mat-color-primary class="query_type">3m</button>
						    <button mat-raised-button mat-color-primary class="query_type">6m</button>
						    <button mat-raised-button mat-color-primary class="query_type">1y</button>
						</div>
					</mat-card-content>
				</mat-card>
			</div>
		</div>
		<!-- Select Country -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex.gt-sm="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Country Selector</span>
						</mat-card-title>
					</mat-card-header>

					<mat-divider></mat-divider>
					<mat-card-content class="mt-1">
						<br>
						<div fxLayout="row" class="mr-05" fxFlex.gt-sm="100">
			      	    <button mat-raised-button mat-color-primary class="query_type">Panam√°</button>
			            <button mat-raised-button class="query_type">Costa Rica</button>
			            <button mat-raised-button class="query_type">Nicaragua</button>
			            <button mat-raised-button class="query_type">El Salvador</button>
			            <button mat-raised-button class="query_type">Honduras</button>
			            <button mat-raised-button class="query_type">Guatemala</button>
						</div>
					</mat-card-content>
				</mat-card>
			</div>
		</div>
		<!-- Connect Your Page -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex.gt-sm="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Connect Your Page</span>
						</mat-card-title>
					</mat-card-header>

					<mat-divider></mat-divider>
					<mat-card-content class="mt-1">
						<br>
						<div fxLayout="row" class="mr-05" fxFlex.gt-sm="100">
						</div>
					</mat-card-content>
				</mat-card>
			</div>
		</div>
		<!-- Query Editor -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex="100" fxFlex.gt-md="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Query</span>
						</mat-card-title>
						<span fxFlex></span>
						<mat-icon class="mat-icon material-icons mat-color-gray">keyboard_arrow_down</mat-icon>
					</mat-card-header>
					<mat-divider></mat-divider>
					<br>
					<!--Query Menu -->
					<div fxLayout="row" fxLayoutWrap="wrap" >
			      	    <button mat-raised-button mat-color-primary class="query_type">Basic Query</button>
			            <button mat-raised-button class="query_type">Advanced Query</button>
					</div>
					<!--Basic Query Editor -->
					<mat-card-content>
						<div class="mt-1" fxLayout="row" fxLayoutWrap="wrap" >
							<div fxLayout="column" fxFlex="100" fxFlex.gt-sm="100">
							    <b>Optional Keywords</b>
							    <p>Your Databox will collect mentions that contain at least one of these keywords, plus all required keywords.</p>
						    	<form>
						    		<mat-form-field style="border: 1px solid gray;" class="full-width">
						    			<div class="p-1">
				                      		<textarea matInput rows="10" cols="80" value="{{editorData}}"></textarea>
				                      	</div>	
						    		</mat-form-field>
						    	</form>
							</div>
						</div>
						<div class="mt-1" fxLayout="row" fxLayoutWrap="wrap" >
							<div fxLayout="column" fxFlex="100" fxFlex.gt-sm="100">
							    <b>Required Keywords</b>
							    <p>Your Databox will collect mentions that contain all of these keywords.</p>
						    	<form>
						    		<mat-form-field style="border: 1px solid gray;" class="full-width">
						    			<div class="p-1">
				                      		<textarea matInput rows="10" cols="80" value="{{editorData}}"></textarea>
				                      	</div>
						    		</mat-form-field>
						    	</form>
							</div>
						</div>
						<div class="mt-1" fxLayout="row" fxLayoutWrap="wrap" >
							<div fxLayout="column" fxFlex="100" fxFlex.gt-sm="100">
							    <b>Exclude Keywords</b>
							    <p>Your Databox will not bring in mentions any of the following keywords.</p>
						    	<form>
						    		<mat-form-field style="border: 1px solid gray;" class="full-width">
						    			<div class="p-1">
				                      		<textarea matInput rows="10" cols="80" value="{{editorData}}"></textarea>
				                      	</div>
						    		</mat-form-field>
						    	</form>						    	
							</div>
						</div>													
					</mat-card-content>
                    <!--Avanced Query Editor -->
                    <mat-card-content>
                        <div fxLayout="row" fxLayoutWrap="wrap">
                            <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" fxLayoutAlign="center">
                                <mat-card-header>
                                  <mat-card-title class="mat-color-primary">
                                    <span>Advanced Query</span>
                                  </mat-card-title>
                                  <mat-card-subtitle>
                                    <p>Lorem ipsum dolor sit amet, et vel error viris democritum, ei duo sumo tota albucius. Sumo atqui ut eam, mel recteque omittantur definitionem et, meliore intellegebat an cum. Vim falli insolens persequeris no. Eu pri aeque semper, dicunt malorum reprehendunt ex mea, viderer inimicus vim ne. Cu causae impetus eam, et atqui tibique consectetuer nam, in erroribus incorrupte vim. Ea voluptua eloquentiam has.</p>
                                  </mat-card-subtitle>
                                </mat-card-header>
                                <mat-divider></mat-divider>
                                <br>
                                <mat-card-content>
                                    <div fxLayout="row" fxLayoutWrap="wrap" class="query-inner">
                                        <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" fxLayoutAlign="center">
                                            <mat-card class="p-0">
                                                <mat-card-content class="p-0">
                                                    <form>
                                                        <mat-form-field class="full-width">
                                                          <textarea matInput placeholder="Query" rows="10" cols="80" value="{{editorData}}"></textarea>
                                                        </mat-form-field>
                                                    </form>
                                                </mat-card-content>
                                                <div class="text-muted query-help">
                                                    <mat-icon class="query-icon">remove_red_eye</mat-icon>
                                                    <a>Show Simple Example</a>
                                                    <mat-icon class="query-icon">remove_red_eye</mat-icon>
                                                    <a>Show Complex Example</a>
                                                    <mat-icon class="query-icon">help_outline</mat-icon>
                                                    <a>Need More Help?</a>
                                                </div>
                                            </mat-card>
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayoutWrap="wrap">
                                        <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" fxLayoutAlign="center">
                                            <mat-card class="query-right-side">
                                                <mat-card-content>
                                                    <p>Boolean Operations: Booleans help you create your query.</p>
                                                    <p class="mat-color-primary query-info"matTooltip="OR operators are used to expand your query. For example: car OR bus OR train">OR = OR's help you expand your query
                                                    </p>
                                                    <p class="mat-color-primary query-info"matTooltip="AND operators are used to expand your query. For example: car AND bus AND train">AND = AND's help you be more exact
                                                    </p>
                                                    <p class="mat-color-primary query-info"matTooltip="NOT operators are used to expand your query. For example: car NOT bus NOT train">NOT = NOT's help you exclude information
                                                    </p>
                                                </mat-card-content>
                                            </mat-card>
                                        </div>
                                    </div>
                                </mat-card-content>
                            </div>
                        </div>
                    </mat-card-content>
				</mat-card>
			</div>	
		</div>
		<!-- Monitored Pages -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex="100" fxFlex.gt-md="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Advanced Settings</span>
						</mat-card-title>
						<span fxFlex></span>
						<mat-icon class="mat-icon material-icons mat-color-gray">keyboard_arrow_down</mat-icon>
					</mat-card-header>
					<mat-divider></mat-divider>
					<br>
	              	<mat-slide-toggle color="primary" class="mb-1" [checked]="checked" matTooltip="Include comments will retieve all the comments from the posts on your query. The content will no necessarily match your query">Include Comments
				  	</mat-slide-toggle>
				  	<br>
				  	<mat-slide-toggle color="primary" class="mb-1" [checked]="checked" matTooltip="Specify the m√°ximum number of results your query will retrieve">Specify Maximum Number of Results
				  	</mat-slide-toggle>
					<br>
	              	<mat-slide-toggle color="primary" class="mb-1" [checked]="checked" matTooltip="Monitor only news media">Monitor only News Media
				  	</mat-slide-toggle>
				  	<br>
	              	<mat-slide-toggle color="primary" class="mb-1" [checked]="checked" matTooltip="Monitor specific pages">Monitor Specific Pages
			  		</mat-slide-toggle>
					<div fxLayout="row" fxLayoutWrap="wrap" >
						<div fxLayout="column" fxFlex="100" fxFlex.gt-sm="100">
						    <p class="mt-1">Please type the Facebook Page ID's, one per row.</p>
					    	<form>
					    		<mat-form-field style="border: 1px solid gray;" class="full-width">
					    			<div class="p-1">
			                      		<textarea matInput rows="10" cols="80" value=""></textarea>
			                      	</div>	
					    		</mat-form-field>
					    	</form>
					    </div>
					</div>
				</mat-card>
			</div>
		</div>
		<div class="m-333" fxLayout="row" fxLayoutWrap="wrap" >
  	      	<span fxFlex></span>
		  	<button mat-raised-button class="mb-05 mat-bg-success">
		    Test Query
		  	</button>
		</div>		
	</div>
	<!-- Column2 -->
	<div fxLayout="column" fxFlex="100" fxFlex.gt-md="50">
		<div class="settings" fxLayout="row" fxLayoutWrap="wrap">
			<h1 class="mat-h3">Results Preview</h1>
		</div>
		<!-- Metrics -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
	        <div fxLayout="column" fxFlex="100" fxFlex.gt-md="100" class="page-search mat-bg-gray">
	          <div>
	            <p>
	                <b>Mentions:</b> {{data?.mentions}}&nbsp;&nbsp;|&nbsp;&nbsp;<b>Mentions per day:</b> {{data?.mentions_per_day}}
	            </p>
	          </div>
	        </div>
    	</div>
		<!-- Line Chart -->
		<div fxLayout="row" fxLayoutWrap="wrap" >
			<div fxFlex="100" fxFlex.gt-sm="100">
				<mat-card class="p-0">
				  <mat-card-content class="p-0" style="max-height: 159px;">
				    <canvas 
				      baseChart 
				      class="chart"
				      [datasets]="lineChartData"
				      [labels]="lineChartLabels"
				      [options]="lineChartOptions"
				      [colors]="chartColors"
				      [legend]="lineChartLegend"
				      [chartType]="lineChartType"></canvas>
				  </mat-card-content>
				</mat-card>
			</div>
		</div>
		<div style="position: -webkit-sticky; position: sticky;top: 0;" fxLayout="row" fxLayoutWrap="wrap" >
			<div fxLayout="column" fxFlex="100" fxFlex.gt-sm="100">
				<mat-card>
					<mat-card-header>
						<mat-card-title>
							<span>Results Preview</span>
						</mat-card-title>
					</mat-card-header>
					<mat-divider></mat-divider>
	                <mat-card-content>
	                </mat-card-content>	                
				</mat-card>
			</div>			
		</div>		
	</div>
</div>
<br>

<mat-divider></mat-divider><br>
<div class="buttonRow m-333" fxLayout="row" fxLayoutWrap="wrap">
  	<button mat-raised-button
    class="mb-05"
    (click)="openDialog('Exit without saving changes?', 'Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum. Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum.', false, '')">
    Cancel
  	</button>
  	<button mat-raised-button
    class="mb-05 mat-bg-gray"
    (click)="openDialog('Save as Draft', 'Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum. Lorem ipsum dolor sit amet, veri modus conceptam mel cu, has in dictas discere qualisque, saperet ullamcorper ad eum.', false, '')">
    Save as Draft
  	</button>
  	<button mat-raised-button
    class="mb-05 mat-bg-green"
    (click)="openMentionsDialog('Create Databox')">
    Create Databox
	</button>
</div>
<br><br>
