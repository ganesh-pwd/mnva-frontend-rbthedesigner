<br>
<div class="header-row m-333" fxLayout="row" fxLayoutWrap="wrap">
  <img src="assets/images/icon-databox.png">
  <h1 class="mat-h1">
    Databoxes
  </h1>
</div>
<div class="m-333" fxLayout="row" fxLayoutWrap="wrap">
  <div fxFlex="100" fxFlex.gt-xs="33">
    <button
      mat-raised-button
      class="mat-bg-success" (click)="createDatabox('Create a New Databox', 'In Minerva, everything happens on a Databox. A Minerva Databox is simply a query to our databases', false)">
      Create Databox
    </button>
  </div>  
  <div fxFlex="100" fxFlex.gt-xs="33">
    <div class="product-search-wrap">
      <form>
        <input type="text" name="searchProduct" placeholder="Search databoxes, datasource or query" class="product-search default-bg full-width" [(ngModel)]="databoxSearch">
      </form>
    </div>
  </div>  
</div>

<hr>
<div fxLayout="row" fxLayoutWrap="wrap" >
  <div fxFlex="100" fxFlex.gt-xs="33" *ngFor="let data of databoxes | MenuFilter: databoxSearch" [@animate]="{value:'*', params:{ y:'200px', delay:'400ms' }}">
    <mat-card class="p-0">
      <mat-card-header class="m-0 p-1" (click)="navigateToDatabox(data._id, data.first_create, data.status)">
      	<mat-card-title class="" (click)="navigateToDatabox(data._id, data.first_create, data.status)">{{data.databox_name}}</mat-card-title>
      	<mat-card-subtitle (click)="navigateToDatabox(data._id, data.first_create, data.status)">{{data.datasource}} | {{data.location}}</mat-card-subtitle>

      	<span fxFlex></span>
      	<button mat-icon-button [matMenuTriggerFor]="userMenu" class="">
      	    <mat-icon class="">more_vert</mat-icon>
      	</button>
      	<mat-menu #userMenu="matMenu">
      	    <button mat-menu-item routerLink="/databoxes/settings/{{data._id}}">Edit Query</button>
            <button mat-menu-item routerLink="/databoxes/settings/connect/{{data?._id}}">Connect Your Data</button>
      	</mat-menu>
      </mat-card-header>

      <mat-divider></mat-divider>

      <mat-card-content (click)="navigateToDatabox(data._id, data.first_create, data.status)" class="m-0 p-1">
        <div>
            <div class="mt-1">
              <div>
                <p>
                    {{data?.mentions}} mentions&nbsp;&nbsp;|&nbsp;&nbsp;{{data?.mentions_per_day}} per day
                </p>
              </div>
            </div>
            <br>
            <br>
        </div>
        <div class="gallery-icons text-center">
          <button mat-icon-button><i class="fa fa-facebook"></i></button>
          <button mat-icon-button><i class="fa fa-twitter"></i></button>
          <button mat-icon-button><i class="fa fa-globe"></i></button>
          <button mat-icon-button><i><img src="/assets/images/tableau.png"></i></button>
          <button mat-icon-button><i><img src="/assets/images/power_bi.png"></i></button>
          <button mat-icon-button><i class="fa fa-cut text-muted"></i></button>
          <button mat-icon-button><i class="fa fa-plus text-muted"></i></button>
        </div>
      </mat-card-content>

      <mat-divider></mat-divider>
      <br>
      <mat-card-actions class="m-0 p-05">
      	<app-slide-toggle [id]="data._id"></app-slide-toggle>
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="no-databoxes">
    <div fxLayout="column" fxlayoutalign="center center" class="text-center" *ngIf="databoxes?.length == 0">
      <h2>There are no databoxes. Please create one.</h2>
      <div fxFlex="100">
        <button
          mat-raised-button
          class="mt-1 mat-bg-success"
          (click)="createDatabox('Create a New Databox', 'In Minerva, everything happens on a Databox. A Minerva Databox is simply a query to our databases', false)">
          Create Databox
        </button>
      </div> 
    </div>
  </div>
</div>
<br>
<br>